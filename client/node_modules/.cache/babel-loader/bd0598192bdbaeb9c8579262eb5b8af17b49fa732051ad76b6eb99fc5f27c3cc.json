{"ast":null,"code":"var _jsxFileName = \"/Users/caleb/Dev/moons_footwear/client/src/context/CartContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useRef, useState } from \"react\";\n// import { useLocalStorage } from \"../hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst CartContext = /*#__PURE__*/createContext({});\nconst CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cartItems, setCartItems] = useState([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [checkout, setCheckout] = useState(false);\n  const cartButtonRef = useRef(null);\n  const openCart = () => {\n    setIsCartOpen(true);\n  };\n  const closeCart = () => {\n    setIsCartOpen(false);\n  };\n  function isSameItem(item1, item2) {\n    return item1.id === item2.id && item1.selectedColor === item2.selectedColor && item1.selectedSize === item2.selectedSize;\n  }\n  function getItemQuantity(item) {\n    var _cartItems$find;\n    return ((_cartItems$find = cartItems.find(el => isSameItem(el, item))) === null || _cartItems$find === void 0 ? void 0 : _cartItems$find.quantity) || 0;\n  }\n  function addItemToCart(item) {\n    setCartItems(currItems => {\n      if (currItems.find(el => isSameItem(el, item)) == null) {\n        return [...cartItems, {\n          ...item,\n          quantity: 1\n        }];\n      } else {\n        return cartItems.map(el => {\n          //if the item in the array is the same as the given item\n          if (isSameItem(el, item)) {\n            //then return that item with increased quantity\n            return {\n              ...el,\n              quantity: el.quantity + 1\n            };\n          } else {\n            return el;\n          }\n        });\n      }\n    });\n  }\n  function decreaseCartQuantity(item) {\n    setCartItems(currItems => {\n      if (currItems.find(el => isSameItem(el, item)) == null) {\n        return cartItems.filter(el => !isSameItem(el, item));\n      } else {\n        return cartItems.map(el => {\n          if (isSameItem(el, item)) {\n            return {\n              ...el,\n              quantity: item.quantity - 1\n            };\n          } else {\n            return el;\n          }\n        });\n      }\n    });\n  }\n  function removeFromCart(item) {\n    setCartItems(currItems => {\n      return currItems.filter(el => !isSameItem(item, el));\n    });\n  }\n  function onCheckout() {\n    setCheckout(false);\n  }\n  const cartQuantity = cartItems.reduce((quantity, item) => item.quantity + quantity, 0);\n  const totalPrice = cartItems.reduce((price, item) => item !== null && item !== void 0 && item.discount ? item.discount * item.price * item.quantity : item.price * item.quantity + price, 0);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      addItemToCart,\n      decreaseCartQuantity,\n      removeFromCart,\n      getItemQuantity,\n      cartItems,\n      cartQuantity,\n      openCart,\n      closeCart,\n      isCartOpen,\n      totalPrice,\n      checkout,\n      setCheckout,\n      onCheckout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"eyXpjIp0mNl9RePhN1scSnSkWV4=\");\n_c = CartProvider;\nexport { CartProvider, useCart };\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useContext","useRef","useState","jsxDEV","_jsxDEV","useCart","_s","CartContext","CartProvider","children","_s2","cartItems","setCartItems","isCartOpen","setIsCartOpen","checkout","setCheckout","cartButtonRef","openCart","closeCart","isSameItem","item1","item2","id","selectedColor","selectedSize","getItemQuantity","item","_cartItems$find","find","el","quantity","addItemToCart","currItems","map","decreaseCartQuantity","filter","removeFromCart","onCheckout","cartQuantity","reduce","totalPrice","price","discount","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/caleb/Dev/moons_footwear/client/src/context/CartContext.tsx"],"sourcesContent":["import { createContext, ReactNode, useContext, useRef, useState } from \"react\";\n// import { useLocalStorage } from \"../hooks/useLocalStorage\";\nimport { ShoppingCart } from \"../components\";\nimport { CartItem } from \"../../../shared/types/product\";\nimport SideBar from \"../components/SideBar\";\n\nconst useCart = () => {\n  return useContext(CartContext);\n};\ntype CartContextType = {\n  addItemToCart: (item: CartItem) => void;\n  decreaseCartQuantity: (item: CartItem) => void;\n  removeFromCart: (item: CartItem) => void;\n  getItemQuantity: (item: CartItem) => number;\n  cartItems: CartItem[];\n  cartQuantity: number;\n  openCart: () => void;\n  closeCart: () => void;\n  isCartOpen: boolean;\n  totalPrice: number;\n  checkout: boolean;\n  setCheckout: React.Dispatch<React.SetStateAction<boolean>>;\n  onCheckout: () => void;\n};\n\nconst CartContext = createContext<CartContextType>({} as CartContextType);\nconst CartProvider = ({ children }: { children: ReactNode }) => {\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [checkout, setCheckout] = useState(false);\n  const cartButtonRef = useRef<HTMLButtonElement>(\n    null\n  ) as React.RefObject<HTMLButtonElement>;\n  const openCart = () => {\n    setIsCartOpen(true);\n  };\n\n  const closeCart = () => {\n    setIsCartOpen(false);\n  };\n\n  function isSameItem(item1: CartItem, item2: CartItem) {\n    return (\n      item1.id === item2.id &&\n      item1.selectedColor === item2.selectedColor &&\n      item1.selectedSize === item2.selectedSize\n    );\n  }\n  function getItemQuantity(item: CartItem) {\n    return cartItems.find((el) => isSameItem(el, item))?.quantity || 0;\n  }\n  function addItemToCart(item: CartItem) {\n    setCartItems((currItems) => {\n      if (currItems.find((el) => isSameItem(el, item)) == null) {\n        return [...cartItems, { ...item, quantity: 1 }];\n      } else {\n        return cartItems.map((el) => {\n          //if the item in the array is the same as the given item\n          if (isSameItem(el, item)) {\n            //then return that item with increased quantity\n            return { ...el, quantity: el.quantity + 1 };\n          } else {\n            return el;\n          }\n        });\n      }\n    });\n  }\n\n  function decreaseCartQuantity(item: CartItem) {\n    setCartItems((currItems) => {\n      if (currItems.find((el) => isSameItem(el, item)) == null) {\n        return cartItems.filter((el) => !isSameItem(el, item));\n      } else {\n        return cartItems.map((el) => {\n          if (isSameItem(el, item)) {\n            return { ...el, quantity: item.quantity - 1 };\n          } else {\n            return el;\n          }\n        });\n      }\n    });\n  }\n  function removeFromCart(item: CartItem) {\n    setCartItems((currItems) => {\n      return currItems.filter((el) => !isSameItem(item, el));\n    });\n  }\n\n  function onCheckout() {\n    setCheckout(false);\n  }\n  const cartQuantity = cartItems.reduce(\n    (quantity, item) => item.quantity + quantity,\n    0\n  );\n  const totalPrice = cartItems.reduce(\n    (price, item) =>\n      item?.discount\n        ? item.discount * item.price * item.quantity\n        : item.price * item.quantity + price,\n    0\n  );\n  return (\n    <CartContext.Provider\n      value={{\n        addItemToCart,\n        decreaseCartQuantity,\n        removeFromCart,\n        getItemQuantity,\n        cartItems,\n        cartQuantity,\n        openCart,\n        closeCart,\n        isCartOpen,\n        totalPrice,\n        checkout,\n        setCheckout,\n        onCheckout,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport { CartProvider, useCart };\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAaC,UAAU,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC9E;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAKA,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,OAAON,UAAU,CAACO,WAAW,CAAC;AAChC,CAAC;AAACD,EAAA,CAFID,OAAO;AAmBb,MAAME,WAAW,gBAAGR,aAAa,CAAkB,CAAC,CAAoB,CAAC;AACzE,MAAMS,YAAY,GAAGA,CAAC;EAAEC;AAAkC,CAAC,KAAK;EAAAC,GAAA;EAC9D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAa,EAAE,CAAC;EAC1D,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMe,aAAa,GAAGhB,MAAM,CAC1B,IACF,CAAuC;EACvC,MAAMiB,QAAQ,GAAGA,CAAA,KAAM;IACrBJ,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMK,SAAS,GAAGA,CAAA,KAAM;IACtBL,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAED,SAASM,UAAUA,CAACC,KAAe,EAAEC,KAAe,EAAE;IACpD,OACED,KAAK,CAACE,EAAE,KAAKD,KAAK,CAACC,EAAE,IACrBF,KAAK,CAACG,aAAa,KAAKF,KAAK,CAACE,aAAa,IAC3CH,KAAK,CAACI,YAAY,KAAKH,KAAK,CAACG,YAAY;EAE7C;EACA,SAASC,eAAeA,CAACC,IAAc,EAAE;IAAA,IAAAC,eAAA;IACvC,OAAO,EAAAA,eAAA,GAAAjB,SAAS,CAACkB,IAAI,CAAEC,EAAE,IAAKV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,CAAC,cAAAC,eAAA,uBAA5CA,eAAA,CAA8CG,QAAQ,KAAI,CAAC;EACpE;EACA,SAASC,aAAaA,CAACL,IAAc,EAAE;IACrCf,YAAY,CAAEqB,SAAS,IAAK;MAC1B,IAAIA,SAAS,CAACJ,IAAI,CAAEC,EAAE,IAAKV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,CAAC,IAAI,IAAI,EAAE;QACxD,OAAO,CAAC,GAAGhB,SAAS,EAAE;UAAE,GAAGgB,IAAI;UAAEI,QAAQ,EAAE;QAAE,CAAC,CAAC;MACjD,CAAC,MAAM;QACL,OAAOpB,SAAS,CAACuB,GAAG,CAAEJ,EAAE,IAAK;UAC3B;UACA,IAAIV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,EAAE;YACxB;YACA,OAAO;cAAE,GAAGG,EAAE;cAAEC,QAAQ,EAAED,EAAE,CAACC,QAAQ,GAAG;YAAE,CAAC;UAC7C,CAAC,MAAM;YACL,OAAOD,EAAE;UACX;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;EAEA,SAASK,oBAAoBA,CAACR,IAAc,EAAE;IAC5Cf,YAAY,CAAEqB,SAAS,IAAK;MAC1B,IAAIA,SAAS,CAACJ,IAAI,CAAEC,EAAE,IAAKV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,CAAC,IAAI,IAAI,EAAE;QACxD,OAAOhB,SAAS,CAACyB,MAAM,CAAEN,EAAE,IAAK,CAACV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,CAAC;MACxD,CAAC,MAAM;QACL,OAAOhB,SAAS,CAACuB,GAAG,CAAEJ,EAAE,IAAK;UAC3B,IAAIV,UAAU,CAACU,EAAE,EAAEH,IAAI,CAAC,EAAE;YACxB,OAAO;cAAE,GAAGG,EAAE;cAAEC,QAAQ,EAAEJ,IAAI,CAACI,QAAQ,GAAG;YAAE,CAAC;UAC/C,CAAC,MAAM;YACL,OAAOD,EAAE;UACX;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;EACA,SAASO,cAAcA,CAACV,IAAc,EAAE;IACtCf,YAAY,CAAEqB,SAAS,IAAK;MAC1B,OAAOA,SAAS,CAACG,MAAM,CAAEN,EAAE,IAAK,CAACV,UAAU,CAACO,IAAI,EAAEG,EAAE,CAAC,CAAC;IACxD,CAAC,CAAC;EACJ;EAEA,SAASQ,UAAUA,CAAA,EAAG;IACpBtB,WAAW,CAAC,KAAK,CAAC;EACpB;EACA,MAAMuB,YAAY,GAAG5B,SAAS,CAAC6B,MAAM,CACnC,CAACT,QAAQ,EAAEJ,IAAI,KAAKA,IAAI,CAACI,QAAQ,GAAGA,QAAQ,EAC5C,CACF,CAAC;EACD,MAAMU,UAAU,GAAG9B,SAAS,CAAC6B,MAAM,CACjC,CAACE,KAAK,EAAEf,IAAI,KACVA,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEgB,QAAQ,GACVhB,IAAI,CAACgB,QAAQ,GAAGhB,IAAI,CAACe,KAAK,GAAGf,IAAI,CAACI,QAAQ,GAC1CJ,IAAI,CAACe,KAAK,GAAGf,IAAI,CAACI,QAAQ,GAAGW,KAAK,EACxC,CACF,CAAC;EACD,oBACEtC,OAAA,CAACG,WAAW,CAACqC,QAAQ;IACnBC,KAAK,EAAE;MACLb,aAAa;MACbG,oBAAoB;MACpBE,cAAc;MACdX,eAAe;MACff,SAAS;MACT4B,YAAY;MACZrB,QAAQ;MACRC,SAAS;MACTN,UAAU;MACV4B,UAAU;MACV1B,QAAQ;MACRC,WAAW;MACXsB;IACF,CAAE;IAAA7B,QAAA,EAEDA;EAAQ;IAAAqC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACvC,GAAA,CAnGIF,YAAY;AAAA0C,EAAA,GAAZ1C,YAAY;AAqGlB,SAASA,YAAY,EAAEH,OAAO;AAAG,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}