{"ast":null,"code":"import { create } from \"zustand\";\nimport { fetchProductById, fetchProductCategory, fetchProductFlags, fetchProductImages } from \"../api/products\";\nimport { fetchAllBrands, fetchAllCategories, fetchAllFlags, fetchAllSubcategories } from \"../api/tags\";\nexport const useProductStore = create((set, get) => ({\n  products: {},\n  productFlags: {},\n  productCategories: {},\n  productSubcategories: {},\n  productImages: {},\n  categories: [],\n  subcategories: [],\n  flags: [],\n  brands: [],\n  isLoading: false,\n  error: null,\n  getProductById: async id => {\n    if (get().products[id]) return;\n    try {\n      const res = await fetchProductById(id);\n      set(state => ({\n        products: {\n          ...state.products,\n          [id]: res\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductCategory: async id => {\n    if (get().productCategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      set(state => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductMetadata: async () => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const [categories, subcategories, flags, brands] = await Promise.all([fetchAllCategories(), fetchAllSubcategories(), fetchAllFlags(), fetchAllBrands()]);\n      set({\n        categories,\n        subcategories,\n        flags,\n        brands,\n        isLoading: false\n      });\n    } catch (err) {\n      set({\n        error: err.message,\n        isLoading: false\n      });\n    }\n  },\n  getProductImages: async id => {\n    if (get().productImages[id]) return;\n    try {\n      const res = await fetchProductImages(id);\n      set(state => ({\n        productImages: {\n          ...state.productImages,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductSubcategories: async id => {\n    if (get().productSubcategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      set(state => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductBrand: async id => {\n    if (get().productCategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      set(state => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductFlags: async id => {\n    if (get().productFlags[id]) return;\n    try {\n      const res = await fetchProductFlags(id);\n      set(state => ({\n        productFlags: {\n          ...state.productFlags,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  }\n}));","map":{"version":3,"names":["create","fetchProductById","fetchProductCategory","fetchProductFlags","fetchProductImages","fetchAllBrands","fetchAllCategories","fetchAllFlags","fetchAllSubcategories","useProductStore","set","get","products","productFlags","productCategories","productSubcategories","productImages","categories","subcategories","flags","brands","isLoading","error","getProductById","id","res","state","err","message","getProductCategory","getProductMetadata","Promise","all","getProductImages","getProductSubcategories","getProductBrand","getProductFlags"],"sources":["/Users/caleb/Dev/moons_footwear/client/src/stores/useProductStore.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport {\n  Product,\n  ProductBrand,\n  ProductCategory,\n  ProductFlag,\n  ProductImage,\n} from \"../../../shared/types\";\nimport {\n  fetchProductById,\n  fetchProductCategory,\n  fetchProductFlags,\n  fetchProductImages,\n} from \"../api/products\";\nimport {\n  fetchAllBrands,\n  fetchAllCategories,\n  fetchAllFlags,\n  fetchAllSubcategories,\n} from \"../api/tags\";\n\ninterface ProductStore {\n  products: Record<number, Product>;\n  productCategories: Record<number, ProductCategory>;\n  productSubcategories: Record<number, string[]>;\n  productImages: Record<number, ProductImage[]>;\n  categories: ProductCategory[];\n  subcategories: ProductCategory[];\n  flags: ProductFlag[];\n  brands: ProductBrand[];\n\n  productFlags: Record<number, ProductFlag[]>;\n  isLoading: boolean;\n  error: string | null;\n\n  getProductById: (id: number) => Promise<void>;\n  getProductCategory: (id: number) => Promise<void>;\n  getProductSubcategories: (id: number) => Promise<void>;\n  getProductImages: (id: number) => Promise<void>;\n  getProductFlags: (id: number) => Promise<void>;\n  getProductBrand: (id: number) => Promise<void>;\n  getProductMetadata: () => Promise<void>;\n}\nexport const useProductStore = create<ProductStore>((set, get) => ({\n  products: {},\n  productFlags: {},\n  productCategories: {},\n  productSubcategories: {},\n  productImages: {},\n  categories: [],\n  subcategories: [],\n  flags: [],\n  brands: [],\n  isLoading: false,\n  error: null,\n\n  getProductById: async (id: number) => {\n    if (get().products[id]) return;\n\n    try {\n      const res = await fetchProductById(id);\n      set((state) => ({\n        products: { ...state.products, [id]: res },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n\n  getProductCategory: async (id: number) => {\n    if (get().productCategories[id]) return;\n\n    try {\n      const res = await fetchProductCategory(id);\n      set((state) => ({\n        productCategories: { ...state.productCategories, [id]: res },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductMetadata: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      const [categories, subcategories, flags, brands] = await Promise.all([\n        fetchAllCategories(),\n        fetchAllSubcategories(),\n        fetchAllFlags(),\n        fetchAllBrands(),\n      ]);\n      set({\n        categories,\n        subcategories,\n        flags,\n        brands,\n        isLoading: false,\n      });\n    } catch (err: any) {\n      set({ error: err.message, isLoading: false });\n    }\n  },\n  getProductImages: async (id: number) => {\n    if (get().productImages[id]) return;\n    try {\n      const res = await fetchProductImages(id);\n      set((state) => ({\n        productImages: {\n          ...state.productImages,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductSubcategories: async (id: number) => {\n    if (get().productSubcategories[id]) return;\n\n    try {\n      const res = await fetchProductCategory(id);\n      set((state) => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductBrand: async (id: number) => {\n    if (get().productCategories[id]) return;\n\n    try {\n      const res = await fetchProductCategory(id);\n      set((state) => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n\n  getProductFlags: async (id: number) => {\n    if (get().productFlags[id]) return;\n\n    try {\n      const res = await fetchProductFlags(id);\n      set((state) => ({\n        productFlags: {\n          ...state.productFlags,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}