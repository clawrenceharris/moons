{"ast":null,"code":"import { create } from \"zustand\";\nimport { fetchProductBrand, fetchProductById, fetchProductCategory, fetchProductFlags, fetchProductImages } from \"../api/products\";\nimport { fetchAllBrands, fetchAllCategories, fetchAllFlags, fetchAllSubcategories } from \"../api/tags\";\nexport const useProductStore = create((set, get) => ({\n  products: {},\n  productFlags: {},\n  productCategories: {},\n  productSubcategories: {},\n  productImages: {},\n  categories: [],\n  subcategories: [],\n  productBrands: {},\n  flags: [],\n  brands: [],\n  isLoading: false,\n  error: null,\n  getProductById: async id => {\n    if (get().products[id]) return;\n    try {\n      const res = await fetchProductById(id);\n      set(state => ({\n        products: {\n          ...state.products,\n          [id]: res\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductCategory: async id => {\n    if (get().productCategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      console.log({\n        category: res\n      });\n      set(state => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductMetadata: async () => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const [categories, subcategories, flags, brands] = await Promise.all([fetchAllCategories(), fetchAllSubcategories(), fetchAllFlags(), fetchAllBrands()]);\n      set({\n        categories,\n        subcategories,\n        flags,\n        brands,\n        isLoading: false\n      });\n    } catch (err) {\n      set({\n        error: err.message,\n        isLoading: false\n      });\n    }\n  },\n  getProductImages: async id => {\n    if (get().productImages[id]) return;\n    try {\n      const res = await fetchProductImages(id);\n      set(state => ({\n        productImages: {\n          ...state.productImages,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductSubcategories: async id => {\n    if (get().productSubcategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      set(state => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductBrand: async id => {\n    if (get().productCategories[id]) return;\n    try {\n      const res = await fetchProductBrand(id);\n      set(state => ({\n        productBrands: {\n          ...state.productBrands,\n          [id]: res\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  },\n  getProductFlags: async id => {\n    if (get().productFlags[id]) return;\n    try {\n      const res = await fetchProductFlags(id);\n      set(state => ({\n        productFlags: {\n          ...state.productFlags,\n          [id]: res || []\n        }\n      }));\n    } catch (err) {\n      set({\n        error: err.message\n      });\n    }\n  }\n}));","map":{"version":3,"names":["create","fetchProductBrand","fetchProductById","fetchProductCategory","fetchProductFlags","fetchProductImages","fetchAllBrands","fetchAllCategories","fetchAllFlags","fetchAllSubcategories","useProductStore","set","get","products","productFlags","productCategories","productSubcategories","productImages","categories","subcategories","productBrands","flags","brands","isLoading","error","getProductById","id","res","state","err","message","getProductCategory","console","log","category","getProductMetadata","Promise","all","getProductImages","getProductSubcategories","getProductBrand","getProductFlags"],"sources":["/Users/caleb/Dev/moons_footwear/client/src/stores/useProductStore.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport {\n  Product,\n  ProductBrand,\n  ProductCategory,\n  ProductFlag,\n  ProductImage,\n} from \"../../../shared/types\";\nimport {\n  fetchProductBrand,\n  fetchProductById,\n  fetchProductCategory,\n  fetchProductFlags,\n  fetchProductImages,\n} from \"../api/products\";\nimport {\n  fetchAllBrands,\n  fetchAllCategories,\n  fetchAllFlags,\n  fetchAllSubcategories,\n} from \"../api/tags\";\n\ninterface ProductStore {\n  products: Record<number, Product>;\n  productCategories: Record<number, ProductCategory>;\n  productSubcategories: Record<number, ProductCategory[]>;\n  productBrands: Record<number, ProductBrand>;\n\n  productImages: Record<number, ProductImage[]>;\n  categories: ProductCategory[];\n  subcategories: ProductCategory[];\n  flags: ProductFlag[];\n  brands: ProductBrand[];\n\n  productFlags: Record<number, ProductFlag[]>;\n  isLoading: boolean;\n  error: string | null;\n\n  getProductById: (id: number) => Promise<void>;\n  getProductCategory: (id: number) => Promise<void>;\n  getProductSubcategories: (id: number) => Promise<void>;\n  getProductImages: (id: number) => Promise<void>;\n  getProductFlags: (id: number) => Promise<void>;\n  getProductBrand: (id: number) => Promise<void>;\n  getProductMetadata: () => Promise<void>;\n}\nexport const useProductStore = create<ProductStore>((set, get) => ({\n  products: {},\n  productFlags: {},\n  productCategories: {},\n  productSubcategories: {},\n  productImages: {},\n  categories: [],\n  subcategories: [],\n  productBrands: {},\n  flags: [],\n  brands: [],\n  isLoading: false,\n  error: null,\n\n  getProductById: async (id: number) => {\n    if (get().products[id]) return;\n\n    try {\n      const res = await fetchProductById(id);\n      set((state) => ({\n        products: { ...state.products, [id]: res },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n\n  getProductCategory: async (id: number) => {\n    if (get().productCategories[id]) return;\n    try {\n      const res = await fetchProductCategory(id);\n      console.log({ category: res });\n\n      set((state) => ({\n        productCategories: { ...state.productCategories, [id]: res },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductMetadata: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      const [categories, subcategories, flags, brands] = await Promise.all([\n        fetchAllCategories(),\n        fetchAllSubcategories(),\n        fetchAllFlags(),\n        fetchAllBrands(),\n      ]);\n      set({\n        categories,\n        subcategories,\n        flags,\n        brands,\n        isLoading: false,\n      });\n    } catch (err: any) {\n      set({ error: err.message, isLoading: false });\n    }\n  },\n  getProductImages: async (id: number) => {\n    if (get().productImages[id]) return;\n    try {\n      const res = await fetchProductImages(id);\n      set((state) => ({\n        productImages: {\n          ...state.productImages,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductSubcategories: async (id: number) => {\n    if (get().productSubcategories[id]) return;\n\n    try {\n      const res = await fetchProductCategory(id);\n      set((state) => ({\n        productCategories: {\n          ...state.productCategories,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n  getProductBrand: async (id: number) => {\n    if (get().productCategories[id]) return;\n\n    try {\n      const res = await fetchProductBrand(id);\n      set((state) => ({\n        productBrands: {\n          ...state.productBrands,\n          [id]: res,\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n\n  getProductFlags: async (id: number) => {\n    if (get().productFlags[id]) return;\n\n    try {\n      const res = await fetchProductFlags(id);\n      set((state) => ({\n        productFlags: {\n          ...state.productFlags,\n          [id]: res || [],\n        },\n      }));\n    } catch (err: any) {\n      set({ error: err.message });\n    }\n  },\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}