{"ast":null,"code":"import{ReactNode,createContext,useContext,useState}from\"react\";import ShoppingCart from\"../components/ShoppingCart\";import{useLocalStorage}from\"../hooks/useLocalStorage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext({});export function useCart(){return useContext(CartContext);}export function CartProvider(_ref){let{children}=_ref;const[cartItems,setCartItems]=useLocalStorage('cart',[]);const[isCartOpen,setIsCartOpen]=useState(false);const[checkout,setCheckout]=useState(false);const openCart=()=>{setIsCartOpen(true);};const closeCart=()=>{setIsCartOpen(false);};function isSameItem(item1,item2){return item1.id==item2.id&&item1.selectedColor==item2.selectedColor&&item1.selectedSize==item2.selectedSize;}function getItemQuantity(item){var _cartItems$find;return((_cartItems$find=cartItems.find(el=>isSameItem(el,item)))===null||_cartItems$find===void 0?void 0:_cartItems$find.quantity)||0;}function increaseCartQuantity(item){setCartItems(currItems=>{if(currItems.find(el=>isSameItem(el,item))==null){return[...cartItems,{...item,quantity:1}];}else{return cartItems.map(el=>{//if the item in the array is the same as the given item \nif(isSameItem(el,item)){//then return that item with increased quantity\nreturn{...el,quantity:el.quantity+1};}else{return el;}});}});}function decreaseCartQuantity(item){setCartItems(currItems=>{if(currItems.find(el=>isSameItem(el,item))==null){return cartItems.filter(el=>!isSameItem(el,item));}else{return cartItems.map(el=>{if(isSameItem(el,item)){return{...el,quantity:item.quantity-1};}else{return el;}});}});}function removeFromCart(item){setCartItems(currItems=>{return currItems.filter(el=>!isSameItem(item,el));});}function onCheckout(){setCheckout(false);}const cartQuantity=cartItems.reduce((quantity,item)=>item.quantity+quantity,0);const totalPrice=cartItems.reduce((price,item)=>item!==null&&item!==void 0&&item.salePrice?item.salePrice*item.quantity+price:item.price*item.quantity+price,0);return/*#__PURE__*/_jsxs(CartContext.Provider,{style:{width:'100%',height:'100%'},value:{increaseCartQuantity,decreaseCartQuantity,removeFromCart,getItemQuantity,cartItems,cartQuantity,openCart,closeCart,isCartOpen,totalPrice,checkout,setCheckout,onCheckout},children:[/*#__PURE__*/_jsx(ShoppingCart,{isCartOpen:isCartOpen,onCheckoutPress:()=>{setIsCartOpen(false);setCheckout(true);}}),children]});}","map":{"version":3,"names":["ReactNode","createContext","useContext","useState","ShoppingCart","useLocalStorage","jsx","_jsx","jsxs","_jsxs","CartContext","useCart","CartProvider","_ref","children","cartItems","setCartItems","isCartOpen","setIsCartOpen","checkout","setCheckout","openCart","closeCart","isSameItem","item1","item2","id","selectedColor","selectedSize","getItemQuantity","item","_cartItems$find","find","el","quantity","increaseCartQuantity","currItems","map","decreaseCartQuantity","filter","removeFromCart","onCheckout","cartQuantity","reduce","totalPrice","price","salePrice","Provider","style","width","height","value","onCheckoutPress"],"sources":["/Users/caleb/moons/src/context/CartContext.jsx"],"sourcesContent":["import { ReactNode, createContext, useContext, useState } from \"react\";\nimport ShoppingCart from \"../components/ShoppingCart\";\nimport { useLocalStorage } from \"../hooks/useLocalStorage\";\n\n\nconst CartContext = createContext({})\n\n\n\nexport function useCart() {\n    return useContext(CartContext);\n}\n\n\n\nexport function CartProvider({ children }) {\n    const [cartItems, setCartItems] = useLocalStorage('cart', []);\n    const [isCartOpen, setIsCartOpen] = useState(false);\n    const [checkout, setCheckout] = useState(false);\n\n    const openCart = () => {\n        setIsCartOpen(true);\n    }\n\n    const closeCart = () => {\n        setIsCartOpen(false)\n    }\n\n    function isSameItem(item1, item2) {\n        return item1.id == item2.id && item1.selectedColor == item2.selectedColor && item1.selectedSize == item2.selectedSize\n    }\n    function getItemQuantity(item) {\n        return cartItems.find(el => isSameItem(el, item))?.quantity || 0;\n    }\n    function increaseCartQuantity(item) {\n        setCartItems(currItems => {\n            if (currItems.find(el => isSameItem(el, item)) == null) {\n                return [...cartItems, { ...item, quantity: 1 }]\n            }\n            else {\n\n                return cartItems.map(el => {\n                    //if the item in the array is the same as the given item \n                    if (isSameItem(el, item)) {\n                        //then return that item with increased quantity\n                        return { ...el, quantity: el.quantity + 1 }\n                    }\n                    else {\n                        return el\n                    }\n                })\n            }\n        })\n    }\n\n\n    function decreaseCartQuantity(item) {\n        setCartItems(currItems => {\n            if (currItems.find(el => isSameItem(el, item)) == null) {\n                return cartItems.filter(el => !isSameItem(el, item))\n            }\n            else {\n                return cartItems.map(el => {\n                    if (isSameItem(el, item)) {\n                        return { ...el, quantity: item.quantity - 1 }\n                    }\n                    else {\n                        return el\n                    }\n                })\n            }\n        })\n    }\n    function removeFromCart(item) {\n        setCartItems(currItems => {\n            return currItems.filter(el => !isSameItem(item, el));\n        })\n    }\n\n    function onCheckout() {\n        setCheckout(false);\n    }\n    const cartQuantity = cartItems.reduce((quantity, item) => item.quantity + quantity, 0);\n    const totalPrice = cartItems.reduce((price, item) => item?.salePrice ? item.salePrice * item.quantity + price : item.price * item.quantity + price, 0);\n    return (\n        <CartContext.Provider style={{ width: '100%', height: '100%' }} value={{\n            increaseCartQuantity,\n            decreaseCartQuantity,\n            removeFromCart,\n            getItemQuantity,\n            cartItems,\n            cartQuantity,\n            openCart,\n            closeCart,\n            isCartOpen,\n            totalPrice,\n            checkout,\n            setCheckout,\n            onCheckout\n        }}>\n            <ShoppingCart isCartOpen={isCartOpen} onCheckoutPress={() => { setIsCartOpen(false); setCheckout(true) }} />\n\n\n\n            {children}\n\n        </CartContext.Provider>)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}